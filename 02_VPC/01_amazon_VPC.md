### 02. 네트워크 / VPC (Virtual Private Cloud)

> **[오늘의 한 줄 요약]**
> VPC는 AWS 클라우드 내에 논리적으로 격리된 나만의 가상 사설 네트워크를 만드는 서비스로, IP 주소 범위(CIDR), 서브넷, 라우팅 테이블, 보안 장치 등을 사용자가 제어할 수 있음

---

### ## 1. 핵심 개념 (What?)

* **VPC (Virtual Private Cloud):** 가상의 사설 네트워크, 내가 만든 네트워크 안에 서버를 배치하고 서로 통신할 수 있게 만드는 논리적 울타리
* **CIDR (사이더):** VPC가 사용할 IP 주소 범위를 지정하는 방식
(예: `10.0.0.0/16`)
* **사설 IP 대역:** VPC 내부에서만 사용되는 IP 주소
(예: `10.x.x.x`, `172.16.x.x`, `192.168.x.x`)
* **서브넷 (Subnet):** VPC라는 큰 땅을 용도에 맞게 잘게 나눈 구역
    * **퍼블릭 서브넷:** 외부에서 접근해도 되는 영역 (예: Web 서버)
    * **프라이빗 서브넷:** 외부에서 접근해선 안 되는 영역 (예: App 서버, DB 서버 배치)
* **방화벽(Firewall)**

* **[VPC의 중요 특징]**
    * **리전(Region) 종속:** VPC는 하나의 리전에 속하며, 여러 가용 영역(AZ)에 걸쳐 생성될 수 있음. (단, 서브넷은 하나의 AZ에만 속함)

---

### ## 2. 핵심 비교 (Comparison)

> 💡 **VPC의 핵심 보안 장치: 보안 그룹(SG) vs 네트워크 ACL(NACL)**

| 구분 |**네트워크 ACL (Network ACL)** | **보안 그룹 (Security Group)** |
| :--- | :--- | :--- |
| **적용 대상** | 서브넷용 방화벽 | 인스턴스(서버)용 방화벽 |
| **방화벽 규칙** | 인바운드, 아웃바운드 모두 허용 | 인바운드 모두 차단 / 아웃바운드 허용(80, 443 포트를 허용하는 작업 필요) |

---

### ## 3. 주요 기능 및 설정 (How?)

* **인터넷 게이트웨이 (IGW):**
    * VPC가 외부 인터넷과 통신할 수 있도록 연결해주는 대문 (공인 IP 필요)
* **라우팅 테이블 (Route Table):**
    * 트래픽의 '이정표' 또는 '내비게이션'
    * "이 IP 대역(`10.0.0.0/16`)으로 가는 트래픽은 내부(local)에서 처리하고, 그 외 모든 트래픽(`0.0.0.0/0`)은 인터넷 게이트웨이(igw-xxxx)로 보내라"고 경로를 지정함
    * **퍼블릭 서브넷**은 이 라우팅 테이블이 IGW로 연결된 서브넷을 의미함
* **NAT 게이트웨이:**
    * '반투명 거울'
    * App 서버 및 DB 서버를 업데이트 하기 위해선 인터넷이 필요
    * 프라이빗 서브넷(App/DB 서버)으로의 외부에서 들어오는 트래픽(Inbound)은 차단하면서, 내부에서 나가는 트래픽만 허용함
    * 고정된 공인 IP(탄력적 IP)가 하나 필요함

---

### ## 4. 아키텍처 예시 (3-Tier Web Application)

가장 일반적인 VPC 아키텍처와 트래픽의 흐름

**요약**
* 요청 (Request) ➡️ 사용자 -> Web 서버 (Tier 1) -> App 서버 (Tier 2) -> DB 서버 (Tier 3)

* 응답 (Response) ⬅️ DB 서버 (Tier 3) -> App 서버 (Tier 2) -> Web 서버 (Tier 1) -> 사용자


**사용자 (User)** 
-> **인터넷 게이트웨이(IGW)**
-> **라우팅 테이블**
-> **네트워크 ACL**
-> **퍼블릭 서브넷**
-> **보안 그룹** 
-> **인스턴스(서버)**

---

### ## 과제1.